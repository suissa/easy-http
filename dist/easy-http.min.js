function http(a) { return new Promise(function (b, c) { function e(a, b) { this.status = a, this.message = b } function f(a) { a && Object.keys(a).forEach(function (b) { d.setRequestHeader(b, a[b]) }) } var d = new XMLHttpRequest; d.open(a.method, a.url), d.onload = function () { return this.status >= 200 && this.status < 300 ? b(JSON.parse(d.response)) : c(new e(this.status, d.statusText)) }, d.onerror = function () { return c(new e(this.status, d.statusText)) }, f(a.headers), d.send(JSON.stringify(a.data)) }) }
